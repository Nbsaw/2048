webpackJsonp([1],{NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("qRXP"),n=i("3cXf"),r=i.n(n),a=i("AA3o"),o=i.n(a),c=i("xSur"),h=i.n(c),l=function(){function e(t){o()(this,e),this.keepPlaying=function(e){e.preventDefault(),this.emit("keepPlaying")},this.events={},window.navigator.msPointerEnabled?(this.eventTouchstart="MSPointerDown",this.eventTouchmove="MSPointerMove",this.eventTouchend="MSPointerUp"):(this.eventTouchstart="touchstart",this.eventTouchmove="touchmove",this.eventTouchend="touchend")}return h()(e,[{key:"listen",value:function(e){var t=this,i={38:0,39:1,40:2,37:3,75:0,76:1,74:2,72:3,87:0,68:1,83:2,65:3};document.addEventListener("keydown",function(e){var s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey,n=i[e.which];s||void 0===n||(e.preventDefault(),t.emit("move",n)),s||82!==e.which||t.restart(e)});var s=void 0,n=void 0;e.addEventListener(this.eventTouchstart,function(e){!window.navigator.msPointerEnabled&&e.touches.length>1||e.targetTouches.length>1||(window.navigator.msPointerEnabled?(s=e.pageX,n=e.pageY):(s=e.touches[0].clientX,n=e.touches[0].clientY),e.preventDefault())}),e.addEventListener(this.eventTouchmove,function(e){e.preventDefault()}),e.addEventListener(this.eventTouchend,function(e){var i=void 0,r=void 0;i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY;var a=i-s,o=Math.abs(a),c=r-n,h=Math.abs(c);Math.max(o,h)>10&&t.emit("move",o>h?a>0?1:3:c>0?2:0)})}},{key:"on",value:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}},{key:"emit",value:function(e,t){var i=this.events[e];i&&i.forEach(function(e){e(t)})}},{key:"restart",value:function(e){e.preventDefault(),this.emit("restart")}}]),e}(),u=i("4YfN"),v=i.n(u),d=function(){function e(t,i,s){o()(this,e),this.withinBounds=function(e){var t=e.x,i=e.y;return t>=0&&t<this.size&&i>=0&&i<this.size},this.findFarthestPosition=function(e,t){var i=void 0;do{e={x:(i=e).x+t.x,y:i.y+t.y}}while(this.withinBounds(e)&&!this.cells[e.x][e.y]);return{farthest:i,next:e}},this.size=t,this.cells=i||this.init(),this.tiles=s||[]}return h()(e,[{key:"init",value:function(){for(var e=this.size,t=[],i=0;i<e;i++){t[i]=[];for(var s=0;s<e;s++)t[i][s]=0}return t}},{key:"addTile",value:function(e,t){this.tiles.push(v()({id:9999999*Math.random()},e,{value:t,class:"tile-new"})),this.cells[e.x][e.y]=1}},{key:"randomTile",value:function(){if(this.freeCell().length>0){var e=Math.random()<.9?2:4,t=this.randomAvailableCell();this.addTile(t,e)}}},{key:"randomAvailableCell",value:function(){var e=this.freeCell();if(e.length)return e[Math.floor(Math.random()*e.length)]}},{key:"moveTile",value:function(e,t){return((e=this.findTile(e)).x!==t.x||e.y!==t.y)&&(this.cells[e.x][e.y]=0,this.cells[t.x][t.y]=1,e.x=t.x,e.y=t.y,e.class="",!0)}},{key:"getVector",value:function(e){return{0:{x:0,y:-1},1:{x:1,y:0},2:{x:0,y:1},3:{x:-1,y:0}}[e]}},{key:"tileMatchesAvailable",value:function(){for(var e=this.size,t=this.cells,i=0;i<e;i++)for(var s=0;s<e;s++)if(t[i][s])for(var n=0;n<4;n++){var r=this.getVector(n),a={x:i+r.x,y:s+r.y};if(a.x>=0&&a.x<e&&a.y>=0&&a.y<e&&(t[a.x][a.y]&&this.findTile(a).value===this.findTile({x:i,y:s}).value))return!0}return!1}},{key:"mergeTiles",value:function(e,t){t.value*=2,t.class="tile-merged";var i=this.tiles;for(var s in i)if(i[s].x===e.x&&i[s].y===e.y){i.splice(parseInt(s),1);break}return this.cells[e.x][e.y]=0,!0}},{key:"findTile",value:function(e){if(-1===e.x||-1===e.y)return null;return this.tiles.filter(function(t,i){return t.x===e.x&&t.y===e.y})[0]}},{key:"eachCell",value:function(e){this.cells.forEach(function(t,i){t.forEach(function(t,s){e(t,i,s)})})}},{key:"freeCell",value:function(){var e=[];return this.eachCell(function(t,i,s){t||e.push({x:i,y:s})}),e}},{key:"getTile",value:function(e){var t=e.x,i=e.y,s=this.cells[t][i];return s||null}}]),e}(),f=function e(){o()(this,e),this.setUp=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=JSON.parse(localStorage.getItem("2048-state")),i=JSON.parse(localStorage.getItem("2048-cells")),s=JSON.parse(localStorage.getItem("2048-tiles"));t&&!e?(this.over=t.over,this.win=t.win,this.keep=t.keep,this.currentScore=t.currentScore,this.bestScore=t.bestScore,this.grid=new d(this.size,i,s)):(this.over=!1,this.win=!1,this.keep=!1,this.currentScore=0,this.bestScore=t.bestScore||0,this.grid=new d(this.size),this.startRandomTiles(),this.saveGame())},this.startRandomTiles=function(){for(var e=this.startCells,t=0;t<e;t++)this.grid.randomTile()},this.buildTraversals=function(e){for(var t={x:[],y:[]},i=0;i<this.size;i++)t.x.push(i),t.y.push(i);return 1===e.x&&(t.x=t.x.reverse()),1===e.y&&(t.y=t.y.reverse()),t},this.getVector=function(e){return{0:{x:0,y:-1},1:{x:1,y:0},2:{x:0,y:1},3:{x:-1,y:0}}[e]},this.move=function(e){var t=this,i=this.grid.findFarthestPosition.bind(this.grid),s=this.getVector(e),n=this.buildTraversals(s),r=!1,a=0,o=!1;n.x.forEach(function(e){n.y.forEach(function(n){var c=t.grid.findTile({x:e,y:n});if(c){var h=i({x:e,y:n},s),l=h.farthest,u=t.grid.findTile(h.next);u&&u.value===c.value?(2048!==(a+=2*u.value)||t.keep||(t.win=!0),r=t.grid.mergeTiles(c,u)):r=t.grid.moveTile({x:e,y:n},l),r&&(o=!0)}})}),o&&(this.grid.randomTile(),-1===this.grid.cells.toString().indexOf("0")&&(this.grid.tileMatchesAvailable()||this.gameOver())),a>0&&this.updateScore(a),this.saveGame()},this.updateScore=function(e){var t=this;this.showAddScore=!1,this.currentScore+=e,this.currentScore>this.bestScore&&(this.bestScore=this.currentScore),setTimeout(function(i){t.addScore=e,t.showAddScore=!0},0)},this.saveGame=function(){var e={over:this.over,win:this.win,keep:this.keep,currentScore:this.currentScore,bestScore:this.bestScore};localStorage.setItem("2048-state",r()(e)),localStorage.setItem("2048-tiles",r()(this.grid.tiles)),localStorage.setItem("2048-cells",r()(this.grid.cells))},this.restart=function(){this.setUp(!0)},this.gameOver=function(){this.over=!0},this.keepPlaying=function(){this.keep=!0},this.size=4,this.inputManager=new l,this.startCells=2,this.addScore=0,this.showAddScore=!1,this.inputManager.on("move",this.move.bind(this)),this.inputManager.on("restart",this.restart.bind(this)),this.inputManager.on("keepPlaying",this.keepPlaying.bind(this)),this.setUp()},m={name:"app",data:function(){return{game:new f,show:!1}},mounted:function(){var e=this.$refs.gameContainer;this.game.inputManager.listen(e)},computed:{tiles:function(){return this.game.grid.tiles},currentScore:function(){return this.game.currentScore},bestScore:function(){return this.game.bestScore},over:function(){return this.game.over},win:function(){return this.game.win},keep:function(){return this.game.keep},showAddScore:function(){return this.game.showAddScore},addScore:function(){return this.game.addScore}},methods:{newGame:function(){this.game.restart()},keepPlay:function(){this.game.keepPlaying()}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"heading"},[i("h1",{staticClass:"title"},[e._v("2048")]),e._v(" "),i("div",{staticClass:"scores-container"},[i("div",{staticClass:"score-container"},[e._v("\n        "+e._s(e.currentScore)+"\n        "),i("div",{staticClass:"score-add",class:{add:e.showAddScore}},[e._v("+ "+e._s(e.addScore))])]),e._v(" "),i("div",{staticClass:"best-container"},[e._v(e._s(e.bestScore))])])]),e._v(" "),i("div",{staticClass:"restart-container"},[e._m(0,!1,!1),e._v(" "),i("button",{staticClass:"btn restart-button",on:{click:e.newGame}},[e._v("New Game")])]),e._v(" "),i("div",{ref:"gameContainer",staticClass:"game-container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.over,expression:"over"}],staticClass:"message-container gg"},[i("p",[e._v("Game Over!")]),e._v(" "),i("button",{staticClass:"btn",on:{click:e.newGame}},[e._v("Try Again")])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.win&&!e.keep,expression:"win && !keep"}],staticClass:"message-container win"},[i("p",[e._v("You Win!")]),e._v(" "),i("button",{staticClass:"btn",on:{click:e.keepPlay}},[e._v("Keep going")]),e._v(" "),i("button",{staticClass:"btn",on:{click:e.newGame}},[e._v("Try again")])]),e._v(" "),i("div",{staticClass:"grid-container"},e._l(4,function(t){return i("div",{key:t,staticClass:"grid-row"},e._l(4,function(e){return i("div",{key:e,staticClass:"grid-cell"})}))})),e._v(" "),i("div",{staticClass:"tile-container"},e._l(e.tiles,function(t,s){return i("div",{key:t.id,staticClass:"tile",class:[""+t.class,"tile-position-"+(t.x+1)+"-"+(t.y+1),"tile-"+t.value]},[i("div",{staticClass:"tile-inner"},[e._v(e._s(t.value))])])}))]),e._v(" "),e._m(1,!1,!1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip"},[this._v("Join the numbers and get to the "),t("b",[this._v("2048 tile!")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("footer",[t("p",[t("b",[this._v("HOW TO PLAY")]),this._v(": Use your arrow keys to move the tiles. When two tiles with the same number touch, they merge into one!")]),this._v(" "),t("hr"),this._v(" "),t("p",[this._v("This Game was power by vue.js "),t("b",[this._v(" Created by ")]),t("a",{attrs:{href:"https://github.com/Nbsaw"}},[this._v("Nbsaw")]),this._v(".")])])}]},y=i("/Xao")(m,g,!1,function(e){i("n6SP")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",template:"<App/>",components:{App:y}})},n6SP:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.fa7ebd45c97f2f328b5c.js.map